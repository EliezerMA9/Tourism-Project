<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Colorlib">
    <meta name="description" content="#">
    <meta name="keywords" content="#">
    <!-- Favicons -->
    <link rel="shortcut icon" href="#">
    <!-- Page Title -->
    <title>TuDestinoRD</title>
    <!-- Icono de la Penstaña -->
    <link rel="shortcut icon" type="image/x-icon" href="../images/favicon.ico" />
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,500,700,900" rel="stylesheet">
    <!-- Simple line Icon -->
    <link rel="stylesheet" href="../css/simple-line-icons.css">
    <!-- Themify Icon -->
    <link rel="stylesheet" href="../css/themify-icons.css">
    <!-- Hover Effects -->
    <link rel="stylesheet" href="../css/set1.css">
    <!-- Main CSS -->
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/layout.css">
</head>

<body>
    <!--============================= HEADER =============================-->
    <div class="dark-bg sticky-top">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-12">
                    <nav class="navbar navbar-expand-lg navbar-light">
                        <a class="navbar-brand" href="index.html">TuDestinoRD</a>
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
              <span class="icon-menu"></span>
            </button>
                        <div class="collapse navbar-collapse justify-content-end" id="navbarNavDropdown">
                            <ul class="navbar-nav">
                                <
                                <li class="nav-item active">
                                    <a class="nav-link" href="#">Sobre Nosotos</a>
                                </li>
                                <li><a href="#" class="btn btn-outline-light top-btn"><span
                                            class="ti-user"></span>Inicial Sesion</a></li>
                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </div>
    <!--//END HEADER -->
    <!--============================= Formulario =============================-->

    <section class="main-block1 light-bg">
      <div class="title">
      </div>
      <div class="form">
        <h5>Agregar Negocio</h5>
        <hr>
        <form>
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="inputName_Group4">Nombre de Grupo</label>
              <input type="text" class="form-control" id="businessName" placeholder="Nombre del Hotel o Restaurante">
            </div>
            <div class="form-group col-md-4">
              <label for="inputNegocio">Tipo de Negocio</label>
              <select id="inputNegocio" class="form-control" onchange="habilitar_input(this);">
                <option value="" selected disabled></option>
                <option>Hotel</option>
                <option>Restaurante</option>
              </select>
          </div>
            <div class="form-group col-md-3">
              <label for="inputCategoria">Categoria</label>
              <select id="inputCategoria" class="form-control" disabled>
                <option selected>Eliga</option>
                <option id="option1">1 Estrella (Economico)</option>
                <option id="option2">2 Estrellas (Valor)</option>
                <option id="option3">3 Estrellas (Calidad)</option>
                <option id="option4">4 Estrellas (Superior)</option>
                <option id="option5">5 Estrellas (Excepcional)</option>
              </select>
          </div>

            <div class="form-group col-md-3">
            <label for="inputProvincia">Provincia</label>
            <select id="inputProvincia" class="form-control" disabled>
            <option selected>Santo Domingo</option>
            <option>Santiago</option>
            <option>San Cristóbal</option>
            <option>La Vega</option>
            <option>Puerto Plata</option>
            <option>San Pedro de Macorís</option>
            <option>Duarte</option>
            <option>La Altagracia</option>
            <option>La Romana</option>
            <option>San Juan</option>
            <option>Espaillat</option>
            <option>Azua</option>
            <option>Barahona</option>
            <option>Monte Plata</option>
            <option>Peravia</option>
            <option>Monseñor Nouel</option>
            <option>Valverde</option>
            <option>Sánchez Ramírez</option>
            <option>María Trinidad Sánchez</option>
            <option>Montecristi</option>
            <option>Samaná</option>
            <option>Bahoruco</option>
            <option>Hermanas Mirabal</option>
            <option>El Seibo</option>
            <option>Hato Mayor</option>
            <option>Dajabón</option>
            <option>Elías Piña</option>
            <option>San José de Ocoa</option>
            <option>Santiago Rodríguez</option>
            <option>Independencia</option>
            <option>Pedernales</option>
        </select>
    </div>

    <div class="form-group col-md-2" id="rncContainer">
      <label for="">RNC</label>
      <input class="form-control" type="text" id="rnc" placeholder="rnc" disabled>
    </div>

    <div class="form-group col-md-3" id="conceptContainer">
      <label for="">Concepto de Negocio</label>
      <select class="form-control" id="businessConcept" class="form-control" title="concepto" disabled>
              <option value="" selected></option>
              <option>Comida rapida</option>
              <option>Chino</option>
              <option>Otro</option>
      </select>
    </div>

    <!-- <div class="form-group col-md-2" id="kindOfEventContainer">
      <label for="">Tipo de Actividades</label>
      <select id="kindOfEvent" class="form-control" title="concepto">
              <option value="" disabled selected></option>
              <option>Afuera</option>
              <option>Arte y cultura</option>
      </select>
    </div> -->
    <div class="form-group col-md-5" id="descriptionContainer">
      <label for="">Descripcion Adicinal</label>
      <input class="form-control" type="text" id="description" placeholder="descripcion" disabled>
    </div>

    <div class="form-group col-md-3">
      <label for="inputTelefono">Telefono</label>
      <input type="tel" class="form-control" id="inputTelefono" placeholder="(###) ### ####" disabled>
    </div>
          <div class="form-group col-md-3">
              <label for="inputHabitaciones">Habitaciones</label>
            <input class="form-control" id="hotelRooms" type="number" placeholder="Numero de habitaciones" disabled>
          </div>
          <div class="form-group col-md-4">
            <label for="servicios_adicionales">Servicios Adicionales</label>
            <div class="servicios_adi">
            <select id="servicios_adicionales" class="form-control"
             title="Debe ir seleccionado una a la vez"
             disabled>
              <option value="" disabled selected></option>
              <option>Minibar</option>
              <option>Piscinas</option>
              <option>Saunas</option>
              <option>Wi-Fi</option>
              <option>Servicio de TV</option>
              <option>Tiendas</option>
              <option>Peluqueria</option>
              <option>Guias Turisticas</option>
              <option>Gimnasio</option>
              <option>Sala Fitness</option>
              <option>Salas de Eventos</option>
            </select>
            <button type="button" class="btn btn-info" id="btn_add">Agregar</button>
            </div>
           </div>
           <div class="services_container" id="servicios_add">
            </div>
        </div>
      </form>

      <button id="saveBtn" class="btn btn-success">Guardar</button>
      </div>

      <div class="lienzoMapa">
        <div id="map"></div>
        <div class="btn_guardar_ubicacion">
          <button class="btn btn-success" id="btn_saveUbicacion">Guardar Ubicacion</button>
        </div>
      </div>

    </section>
    <!--//END ADD LISTING -->
    <!--============================= FOOTER =============================-->
    <footer class="main-block dark-bg">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="copyright">
                        <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                        <p>Copyright &copy; 2021 _____. All rights reserved.</p>
                        <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                        <ul>
                            <li><a href="#"><span class="ti-facebook"></span></a></li>
                            <li><a href="#"><span class="ti-twitter-alt"></span></a></li>
                            <li><a href="#"><span class="ti-instagram"></span></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!--//END FOOTER -->




    <!-- jQuery, Bootstrap JS. -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/add_business.js"></script>

    <script type="text/javascript" src="js/add_business.js"></script>
    <script>


    var marker;          //variable del marcador
    var coords = {};    //coordenadas obtenidas con la geolocalización

    var latitude = "";
    var longitude = "";

    //Funcion principal
    initMap = function ()
    {

    //usamos la API para geolocalizar el usuario
        navigator.geolocation.getCurrentPosition(
          function (position){
            coords =  {
              lng: position.coords.longitude,
              lat: position.coords.latitude
            };
            setMapa(coords);  //pasamos las coordenadas al metodo para crear el mapa


          },function(error){console.log(error);});

    }

    function setMapa (coords)
    {
      //Se crea una nueva instancia del objeto mapa
      var map = new google.maps.Map(document.getElementById('map'),
      {
        zoom: 13,
        center:new google.maps.LatLng(coords.lat,coords.lng),

      });

      //Creamos el marcador en el mapa con sus propiedades
      //para nuestro obetivo tenemos que poner el atributo draggable en true
      //position pondremos las mismas coordenas que obtuvimos en la geolocalización
      marker = new google.maps.Marker({
        map: map,
        // icon: {
        //   path: google.maps.SymbolPath.CIRCLE,
        //   scale: 10, //tamaño
        //   strokeColor: '#f00', //color del borde
        //   strokeWeight: 5, //grosor del borde
        //   fillColor: '#00f', //color de relleno
        //   fillOpacity:1// opacidad del relleno
        // },
        draggable: true,
        animation: google.maps.Animation.DROP,
        position: new google.maps.LatLng(coords.lat,coords.lng),

      });
      //agregamos un evento al marcador junto con la funcion callback al igual que el evento dragend que indica
      //cuando el usuario a soltado el marcador
      marker.addListener('click', toggleBounce);

      marker.addListener( 'dragend', function (event)
      {
        latitude = this.getPosition().lat();
        longitude = this.getPosition().lng();
      });
    }

    //callback al hacer clic en el marcador lo que hace es quitar y poner la animacion BOUNCE
    function toggleBounce() {
    if (marker.getAnimation() !== null) {
    marker.setAnimation(null);
    } else {
    marker.setAnimation(google.maps.Animation.BOUNCE);
    }
    }
    var btn_saveUbicacion = document.getElementById('btn_saveUbicacion');

    btn_saveUbicacion.addEventListener("click", (e) => {
    e.preventDefault();

    (async () => {
    const rawResponse = await fetch(
      "http://0cbd09cc313f.ngrok.io/business/testlocation",
      {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          Accept: "application/json",
        },
        body: JSON.stringify({
          coordN: latitude,// Variable universal con la coordenada de LATITUD
          coordW: longitude,// Variable universal con la coordenada de LONGITUD
        }),
      }
    );
    const content = await rawResponse;
    console.log(content);
    })();
    });
    // Carga de la libreria de google maps

    </script>

    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBduegwAEURuLnKpbqOhnD61av0jYKQSAY&callback=initMap"></script>
</body>

</html>
